"use strict";(self.webpackChunkMyPRJ=self.webpackChunkMyPRJ||[]).push([[985],{7985:(O,m,r)=>{r.r(m),r.d(m,{SensModule:()=>N});var u=r(6814),c=r(95),C=r(824),f=r(2840),M=r(6987),g=r(8070),y=r(9481),_=r(1567),e=r(5879),v=r(4004);let T=(()=>{class i{constructor(){}generateUUID(){return(0,v.Z)()}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),J=(()=>{class i{constructor(){this.BuyItems=[]}setItems(n){this.BuyItems=n}getItems(){return this.BuyItems}addItem(n){this.BuyItems.push(n)}delItem(n){this.BuyItems.splice(n,1)}editItem(n,s){this.BuyItems[n]=s}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var z=r(5842),I=r(855),R=r(1958);function D(i,p){if(1&i&&e._UZ(0,"nz-option",9),2&i){const n=p.$implicit;e.Q6J("nzValue",n.id)("nzLabel",n.name)}}const S=function(i,p){return{color:i,"background-color":p}},Z=[{path:"",component:(()=>{class i{constructor(n,s,t,l){this.uuidService=n,this.sensService=s,this.cdr=t,this.modal=l,this.listOfData=[],this.selectedId="",this.selectedName="",this.selectedCost1=0,this.selectedCost2=0,this.selectedVol1=0,this.selectedVol2=0,this.Res1=0,this.Res2=0,this.idx="",this.textColor1="black",this.bgColor1="white",this.textColor2="black",this.bgColor2="white"}ngOnInit(){this.setSelectedName(this.selectedId)}onKeyPress(n){if(["Backspace","ArrowLeft","ArrowRight","Delete","Tab"].includes(n.key))return void this.onCalc();const t=n.target;/[0-9]/.test(n.key)?this.onCalc():"."!==n.key||/[.,]/.test(t.value)?n.preventDefault():this.onCalc()}updateColorsByT(n){console.log(n),n>0?(this.textColor1="green",this.bgColor1="#e6ffed",this.textColor2="red",this.bgColor2="#ffe6e6"):(this.textColor1="red",this.bgColor1="#ffe6e6",this.textColor2="green",this.bgColor2="#e6ffed"),0==n&&(this.textColor1="black",this.bgColor1="white",this.textColor2="black",this.bgColor2="white")}getRes1(){this.Res1=0!==this.selectedVol1?this.selectedCost1/this.selectedVol1:0}getRes2(){this.Res2=0!==this.selectedVol2?this.selectedCost2/this.selectedVol2:0}onCalc(){this.getRes1(),this.getRes2(),this.updateColorsByT(this.Res2-this.Res1)}onSelectChange(n){this.setSelectedName(n)}MakeADD(){const n=this.uuidService.generateUUID();console.log(n),this.Sens={id:n,name:this.selectedName,cost1:this.selectedCost1,cost2:this.selectedCost2,vol1:this.selectedVol1,vol2:this.selectedVol2},this.sensService.addItem(this.Sens),this.listOfData=this.sensService.getItems()}MakeDel(){if(confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?")){const s=this.idx,t=this.listOfData.findIndex(l=>l.id===s);t>-1&&this.sensService.delItem(t)}}MakePUT(){const n=this.idx,s=this.listOfData.findIndex(t=>t.id===n);s>-1&&(this.Sens={id:this.idx,name:this.selectedName,cost1:this.selectedCost1,cost2:this.selectedCost2,vol1:this.selectedVol1,vol2:this.selectedVol2},confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 ?")&&this.sensService.editItem(s,this.Sens))}setSelectedName(n){const s=this.listOfData.find(t=>t.id===n);this.idx=n,this.selectedName=s?s.name:"",this.selectedCost1=s?s.cost1:0,this.selectedCost2=s?s.cost2:0,this.selectedVol1=s?s.vol1:0,this.selectedVol2=s?s.vol2:0,this.onCalc()}downloadFile(){const s=`SensList-${(new Date).toISOString().replace(/[:.]/g,"-")}.json`,t=JSON.stringify({listOfData:this.listOfData}),l=new Blob([t],{type:"application/json"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.href=o,a.download=s,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(o),document.body.removeChild(a)}onFileSelected(n){const s=n.target;if(s.files&&s.files.length){const t=s.files[0],l=new FileReader;l.onload=o=>{const a=o.target?.result;try{const h=JSON.parse(a);if(!h.listOfData||!Array.isArray(h.listOfData))throw new Error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 JSON");this.listOfData=h.listOfData.map(d=>({id:d.id,name:d.name,cost1:d.cost1,cost2:d.cost2,vol1:d.vol1,vol2:d.vol2})),this.sensService.setItems(this.listOfData),console.log(this.listOfData)}catch(h){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0435 JSON",h)}},l.readAsText(t)}}static#e=this.\u0275fac=function(s){return new(s||i)(e.Y36(T),e.Y36(J),e.Y36(e.sBO),e.Y36(z.Sf))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["SensComponent"]],decls:17,vars:21,consts:[[1,"send-request"],["type","file",3,"change"],["nz-button","","nzType","primary",3,"click"],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","type","text",2,"width","50%",3,"ngModel","ngModelChange"],["nz-input","","placeholder","ID",2,"width","50%",3,"ngModel","disabled","ngModelChange"],["nz-input","","placeholder","Basic usage","inputmode","numeric","pattern","[0-9]*",2,"width","30%",3,"ngModel","ngModelChange","keypress"],["nz-input","","placeholder","Basic usage",2,"width","30%",3,"ngModel","disabled","ngStyle","ngModelChange"],[3,"nzValue","nzLabel"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(o){return t.onFileSelected(o)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return t.MakeADD()}),e._uU(3,"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.downloadFile()}),e._uU(5,"\u0412 \u0444\u0430\u0439\u043b"),e.qZA()(),e.TgZ(6,"div",0)(7,"nz-select",3),e.NdJ("ngModelChange",function(o){return t.selectedId=o})("ngModelChange",function(o){return t.onSelectChange(o)}),e.YNc(8,D,1,2,"nz-option",4),e.qZA()(),e.TgZ(9,"input",5),e.NdJ("ngModelChange",function(o){return t.selectedName=o}),e.qZA(),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(o){return t.idx=o}),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(o){return t.selectedCost1=o})("ngModelChange",function(){return t.getRes1()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(o){return t.selectedVol1=o})("ngModelChange",function(){return t.getRes1()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(o){return t.Res1=o}),e.qZA(),e.TgZ(14,"input",7),e.NdJ("ngModelChange",function(o){return t.selectedCost2=o})("ngModelChange",function(){return t.getRes2()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA(),e.TgZ(15,"input",7),e.NdJ("ngModelChange",function(o){return t.selectedVol2=o})("ngModelChange",function(){return t.getRes2()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA(),e.TgZ(16,"input",8),e.NdJ("ngModelChange",function(o){return t.Res2=o}),e.qZA()),2&s&&(e.xp6(7),e.Q6J("ngModel",t.selectedId),e.xp6(1),e.Q6J("ngForOf",t.listOfData),e.xp6(1),e.Q6J("ngModel",t.selectedName),e.xp6(1),e.Q6J("ngModel",t.idx)("disabled",!0),e.xp6(1),e.Q6J("ngModel",t.selectedCost1),e.xp6(1),e.Q6J("ngModel",t.selectedVol1),e.xp6(1),e.Q6J("ngModel",t.Res1)("disabled",!0)("ngStyle",e.WLB(15,S,t.textColor1,t.bgColor1)),e.xp6(1),e.Q6J("ngModel",t.selectedCost2),e.xp6(1),e.Q6J("ngModel",t.selectedVol2),e.xp6(1),e.Q6J("ngModel",t.Res2)("disabled",!0)("ngStyle",e.WLB(18,S,t.textColor2,t.bgColor2)))},dependencies:[u.sg,u.PC,g.Ip,g.Vq,f.ix,I.w,R.dQ,c.Fj,c.JJ,c.c5,c.On,C.Zp]})}return i})()}];let b=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(Z),_.Bz]})}return i})(),N=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[u.ez,b,g.LV,f.sL,M.S,y.HQ,c.u5,C.o7]})}return i})()}}]);