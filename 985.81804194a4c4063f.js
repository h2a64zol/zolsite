"use strict";(self.webpackChunkMyPRJ=self.webpackChunkMyPRJ||[]).push([[985],{7985:(V,g,d)=>{d.r(g),d.d(g,{SensModule:()=>Z});var p=d(6814),r=d(95),m=d(824),f=d(2840),S=d(6987),u=d(8070),M=d(9481),C=d(1567),e=d(5879),v=d(4004);let _=(()=>{class o{constructor(){}generateUUID(){return(0,v.Z)()}static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),J=(()=>{class o{constructor(){this.BuyItems=[]}setItems(s){this.BuyItems=s}getItems(){return this.BuyItems}addItem(s){this.BuyItems.push(s)}delItem(s){this.BuyItems.splice(s,1)}editItem(s,t){this.BuyItems[s]=t}static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var y=d(5842),z=d(855),I=d(1958);function T(o,D){if(1&o&&e._UZ(0,"nz-option",9),2&o){const s=D.$implicit;e.Q6J("nzValue",s.id)("nzLabel",s.name)}}const N=[{path:"",component:(()=>{class o{constructor(s,t,n,l){this.uuidService=s,this.sensService=t,this.cdr=n,this.modal=l,this.listOfData=[],this.selectedId="",this.selectedName="",this.selectedCost1=0,this.selectedCost2=0,this.selectedVol1=0,this.selectedVol2=0,this.Res1=0,this.Res2=0,this.idx=""}ngOnInit(){this.setSelectedName(this.selectedId)}getRes1(){this.Res1=this.selectedCost1/this.selectedVol1}getRes2(){this.Res2=this.selectedCost2/this.selectedVol2}onCalc(){this.getRes1(),this.getRes2()}onSelectChange(s){this.setSelectedName(s)}MakeADD(){const s=this.uuidService.generateUUID();this.Sens={id:s,name:this.selectedName,cost1:this.selectedCost1,cost2:this.selectedCost2,vol1:this.selectedVol1,vol2:this.selectedVol2},this.sensService.addItem(this.Sens)}MakeDel(){if(confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?")){const t=this.idx,n=this.listOfData.findIndex(l=>l.id===t);n>-1&&this.sensService.delItem(n)}}MakePUT(){const s=this.idx,t=this.listOfData.findIndex(n=>n.id===s);t>-1&&(this.Sens={id:this.idx,name:this.selectedName,cost1:this.selectedCost1,cost2:this.selectedCost2,vol1:this.selectedVol1,vol2:this.selectedVol2},confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 ?")&&this.sensService.editItem(t,this.Sens))}setSelectedName(s){const t=this.listOfData.find(n=>n.id===s);this.selectedName=t?t.name:"",this.selectedCost1=t?t.cost1:0,this.selectedCost2=t?t.cost2:0,this.selectedVol1=t?t.vol1:0,this.selectedVol2=t?t.vol2:0,this.onCalc()}downloadFile(){const t=`SensList-${(new Date).toISOString().replace(/[:.]/g,"-")}.json`,n=JSON.stringify({listOfData:this.listOfData}),l=new Blob([n],{type:"application/json"}),i=window.URL.createObjectURL(l),a=document.createElement("a");a.href=i,a.download=t,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(i),document.body.removeChild(a)}onFileSelected(s){const t=s.target;if(t.files&&t.files.length){const n=t.files[0],l=new FileReader;l.onload=i=>{const a=i.target?.result;try{const h=JSON.parse(a);if(!h.listOfData||!Array.isArray(h.listOfData))throw new Error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 JSON");this.listOfData=h.listOfData.map(c=>({id:c.id,name:c.name,cost1:c.cost1,cost2:c.cost2,vol1:c.vol1,vol2:c.vol2})),this.sensService.setItems(this.listOfData),console.log(this.listOfData)}catch(h){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0435 JSON",h)}},l.readAsText(n)}}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(_),e.Y36(J),e.Y36(e.sBO),e.Y36(y.Sf))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["SensComponent"]],decls:14,vars:13,consts:[[1,"send-request"],["type","file",3,"change"],["nz-button","","nzType","primary",3,"click"],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","type","text",2,"width","50%",3,"ngModel","ngModelChange"],["nz-input","","placeholder","ID",2,"width","50%",3,"ngModel","disabled","ngModelChange"],["nz-input","","placeholder","Basic usage","type","number",2,"width","30%",3,"ngModel","ngModelChange"],["nz-input","","placeholder","Basic usage",2,"width","30%",3,"ngModel","disabled","ngModelChange"],[3,"nzValue","nzLabel"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(i){return n.onFileSelected(i)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.downloadFile()}),e._uU(3,"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c"),e.qZA()(),e.TgZ(4,"nz-select",3),e.NdJ("ngModelChange",function(i){return n.selectedId=i})("ngModelChange",function(i){return n.onSelectChange(i)}),e.YNc(5,T,1,2,"nz-option",4),e.qZA(),e.TgZ(6,"input",5),e.NdJ("ngModelChange",function(i){return n.selectedName=i}),e.qZA(),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(i){return n.idx=i}),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(i){return n.selectedCost1=i})("ngModelChange",function(){return n.getRes1()}),e.qZA(),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(i){return n.selectedVol1=i}),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(i){return n.Res1=i}),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(i){return n.selectedCost2=i}),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(i){return n.selectedVol2=i}),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(i){return n.value=i}),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.selectedId),e.xp6(1),e.Q6J("ngForOf",n.listOfData),e.xp6(1),e.Q6J("ngModel",n.selectedName),e.xp6(1),e.Q6J("ngModel",n.idx)("disabled",!0),e.xp6(1),e.Q6J("ngModel",n.selectedCost1),e.xp6(1),e.Q6J("ngModel",n.selectedVol1),e.xp6(1),e.Q6J("ngModel",n.Res1)("disabled",!0),e.xp6(1),e.Q6J("ngModel",n.selectedCost2),e.xp6(1),e.Q6J("ngModel",n.selectedVol2),e.xp6(1),e.Q6J("ngModel",n.value)("disabled",!0))},dependencies:[p.sg,u.Ip,u.Vq,f.ix,z.w,I.dQ,r.Fj,r.wV,r.JJ,r.On,m.Zp]})}return o})()}];let O=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[C.Bz.forChild(N),C.Bz]})}return o})(),Z=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[p.ez,O,u.LV,f.sL,S.S,M.HQ,r.u5,m.o7]})}return o})()}}]);