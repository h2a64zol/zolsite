"use strict";(self.webpackChunkMyPRJ=self.webpackChunkMyPRJ||[]).push([[985],{7985:(O,C,u)=>{u.r(C),u.d(C,{SensModule:()=>N});var h=u(6814),d=u(95),m=u(824),f=u(2840),y=u(6987),g=u(8070),M=u(9481),_=u(1567),e=u(5879),v=u(4004);let T=(()=>{class i{constructor(){}generateUUID(){return(0,v.Z)()}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Z=(()=>{class i{constructor(){this.BuyItems=[]}setItems(n){this.BuyItems=n}getItems(){return this.BuyItems}addItem(n){this.BuyItems.push(n)}delItem(n){this.BuyItems.splice(n,1)}editItem(n,s){this.BuyItems[n]=s}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var b=u(5842),J=u(855),z=u(1958);function A(i,p){if(1&i&&e._UZ(0,"nz-option",14),2&i){const n=p.$implicit;e.Q6J("nzValue",n.id)("nzLabel",n.name)}}const S=function(i,p){return{color:i,"background-color":p}},D=[{path:"",component:(()=>{class i{constructor(n,s,t,l){this.uuidService=n,this.sensService=s,this.cdr=t,this.modal=l,this.listOfData=[],this.selectedId="",this.selectedName="",this.selectedCost1=0,this.selectedCost2=0,this.selectedVol1=0,this.selectedVol2=0,this.Res1=0,this.Res2=0,this.idx="",this.textColor1="black",this.bgColor1="white",this.textColor2="black",this.bgColor2="white"}ngOnInit(){this.setSelectedName(this.selectedId)}onKeyPress(n){if(["Backspace","ArrowLeft","ArrowRight","Delete","Tab"].includes(n.key))return;const t=n.target;/[0-9]/.test(n.key)||"."===n.key&&!/[.,]/.test(t.value)||n.preventDefault()}updateColorsByT(n){if(0==n)return this.textColor1="black",this.bgColor1="white",this.textColor2="black",void(this.bgColor2="white");n>0?(this.textColor1="green",this.bgColor1="#e6ffed",this.textColor2="red",this.bgColor2="#ffe6e6"):(this.textColor1="red",this.bgColor1="#ffe6e6",this.textColor2="green",this.bgColor2="#e6ffed")}getRes1(){this.Res1=0!==this.selectedVol1?this.selectedCost1/this.selectedVol1:0}getRes2(){this.Res2=0!==this.selectedVol2?this.selectedCost2/this.selectedVol2:0}onCalc(){this.getRes1(),this.getRes2(),this.updateColorsByT(this.Res2-this.Res1)}onSelectChange(n){this.setSelectedName(n)}MakeADD(){const n=this.uuidService.generateUUID();console.log(n),this.Sens={id:n,name:this.selectedName,cost1:this.selectedCost1,cost2:this.selectedCost2,vol1:this.selectedVol1,vol2:this.selectedVol2},this.sensService.addItem(this.Sens),this.listOfData=this.sensService.getItems()}MakeDel(){if(confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?")){const s=this.idx,t=this.listOfData.findIndex(l=>l.id===s);t>-1&&this.sensService.delItem(t)}}MakePUT(){const n=this.idx,s=this.listOfData.findIndex(t=>t.id===n);s>-1&&(this.Sens={id:this.idx,name:this.selectedName,cost1:this.selectedCost1,cost2:this.selectedCost2,vol1:this.selectedVol1,vol2:this.selectedVol2},confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 ?")&&this.sensService.editItem(s,this.Sens))}setSelectedName(n){const s=this.listOfData.find(t=>t.id===n);this.idx=n,this.selectedName=s?s.name:"",this.selectedCost1=s?s.cost1:0,this.selectedCost2=s?s.cost2:0,this.selectedVol1=s?s.vol1:0,this.selectedVol2=s?s.vol2:0,this.onCalc()}downloadFile(){const s=`SensList-${(new Date).toISOString().replace(/[:.]/g,"-")}.json`,t=JSON.stringify({listOfData:this.listOfData}),l=new Blob([t],{type:"application/json"}),o=window.URL.createObjectURL(l),r=document.createElement("a");r.href=o,r.download=s,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(o),document.body.removeChild(r)}onFileSelected(n){const s=n.target;if(s.files&&s.files.length){const t=s.files[0],l=new FileReader;l.onload=o=>{const r=o.target?.result;try{const c=JSON.parse(r);if(!c.listOfData||!Array.isArray(c.listOfData))throw new Error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 JSON");this.listOfData=c.listOfData.map(a=>({id:a.id,name:a.name,cost1:a.cost1,cost2:a.cost2,vol1:a.vol1,vol2:a.vol2})),this.sensService.setItems(this.listOfData),console.log(this.listOfData)}catch(c){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0435 JSON",c)}},l.readAsText(t)}}static#e=this.\u0275fac=function(s){return new(s||i)(e.Y36(T),e.Y36(Z),e.Y36(e.sBO),e.Y36(b.Sf))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["SensComponent"]],decls:47,vars:21,consts:[[1,"send-request"],["type","file",3,"change"],["nz-button","","nzType","primary",3,"click"],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[2,"display","flex","gap","20px"],[2,"display","flex","flex-direction","column","width","50%"],["nz-input","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","type","text",3,"ngModel","ngModelChange"],["nz-input","","placeholder","ID",3,"ngModel","disabled","ngModelChange"],[2,"display","flex","gap","20px","flex-wrap","wrap"],[2,"display","flex","flex-direction","column","width","30%"],["nz-input","","placeholder","\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c","inputmode","numeric","pattern","[0-9]*",3,"ngModel","ngModelChange","keypress"],["nz-input","","placeholder","\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e","inputmode","numeric","pattern","[0-9]*",3,"ngModel","ngModelChange","keypress"],["nz-input","","placeholder","\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",3,"ngModel","disabled","ngStyle","ngModelChange"],[3,"nzValue","nzLabel"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(o){return t.onFileSelected(o)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return t.MakeADD()}),e._uU(3,"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.downloadFile()}),e._uU(5,"\u0412 \u0444\u0430\u0439\u043b"),e.qZA()(),e.TgZ(6,"div",0)(7,"nz-select",3),e.NdJ("ngModelChange",function(o){return t.selectedId=o})("ngModelChange",function(o){return t.onSelectChange(o)}),e.YNc(8,A,1,2,"nz-option",4),e.qZA()(),e._UZ(9,"hr"),e.TgZ(10,"div",5)(11,"div",6)(12,"label"),e._uU(13,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(14,"input",7),e.NdJ("ngModelChange",function(o){return t.selectedName=o}),e.qZA()(),e.TgZ(15,"div",6)(16,"label"),e._uU(17,"ID"),e.qZA(),e.TgZ(18,"input",8),e.NdJ("ngModelChange",function(o){return t.idx=o}),e.qZA()()(),e._UZ(19,"hr"),e.TgZ(20,"div",9)(21,"div",10)(22,"label"),e._uU(23,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c 1"),e.qZA(),e.TgZ(24,"input",11),e.NdJ("ngModelChange",function(o){return t.selectedCost1=o})("ngModelChange",function(){return t.onCalc()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA()(),e.TgZ(25,"div",10)(26,"label"),e._uU(27,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e 1"),e.qZA(),e.TgZ(28,"input",12),e.NdJ("ngModelChange",function(o){return t.selectedVol1=o})("ngModelChange",function(){return t.onCalc()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA()(),e.TgZ(29,"div",10)(30,"label"),e._uU(31,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 1"),e.qZA(),e.TgZ(32,"input",13),e.NdJ("ngModelChange",function(o){return t.Res1=o}),e.qZA()()(),e._UZ(33,"hr"),e.TgZ(34,"div",9)(35,"div",10)(36,"label"),e._uU(37,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c 2"),e.qZA(),e.TgZ(38,"input",11),e.NdJ("ngModelChange",function(o){return t.selectedCost2=o})("ngModelChange",function(){return t.onCalc()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA()(),e.TgZ(39,"div",10)(40,"label"),e._uU(41,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e 2"),e.qZA(),e.TgZ(42,"input",12),e.NdJ("ngModelChange",function(o){return t.selectedVol2=o})("ngModelChange",function(){return t.onCalc()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA()(),e.TgZ(43,"div",10)(44,"label"),e._uU(45,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 2"),e.qZA(),e.TgZ(46,"input",13),e.NdJ("ngModelChange",function(o){return t.Res2=o}),e.qZA()()()),2&s&&(e.xp6(7),e.Q6J("ngModel",t.selectedId),e.xp6(1),e.Q6J("ngForOf",t.listOfData),e.xp6(6),e.Q6J("ngModel",t.selectedName),e.xp6(4),e.Q6J("ngModel",t.idx)("disabled",!0),e.xp6(6),e.Q6J("ngModel",t.selectedCost1),e.xp6(4),e.Q6J("ngModel",t.selectedVol1),e.xp6(4),e.Q6J("ngModel",t.Res1)("disabled",!0)("ngStyle",e.WLB(15,S,t.textColor1,t.bgColor1)),e.xp6(6),e.Q6J("ngModel",t.selectedCost2),e.xp6(4),e.Q6J("ngModel",t.selectedVol2),e.xp6(4),e.Q6J("ngModel",t.Res2)("disabled",!0)("ngStyle",e.WLB(18,S,t.textColor2,t.bgColor2)))},dependencies:[h.sg,h.PC,g.Ip,g.Vq,f.ix,J.w,z.dQ,d.Fj,d.JJ,d.c5,d.On,m.Zp]})}return i})()}];let I=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(D),_.Bz]})}return i})(),N=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[h.ez,I,g.LV,f.sL,y.S,M.HQ,d.u5,m.o7]})}return i})()}}]);