"use strict";(self.webpackChunkMyPRJ=self.webpackChunkMyPRJ||[]).push([[985],{7985:(N,C,r)=>{r.r(C),r.d(C,{SensModule:()=>V});var h=r(6814),u=r(95),m=r(824),f=r(2840),S=r(6987),g=r(8070),y=r(9481),_=r(1567),e=r(5879),v=r(4004);let T=(()=>{class i{constructor(){}generateUUID(){return(0,v.Z)()}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Z=(()=>{class i{constructor(){this.BuyItems=[]}setItems(n){this.BuyItems=n}getItems(){return this.BuyItems}addItem(n){this.BuyItems.push(n)}delItem(n){this.BuyItems.splice(n,1)}editItem(n,s){this.BuyItems[n]=s}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var z=r(5842),D=r(855),J=r(1958);function b(i,p){if(1&i&&e._UZ(0,"nz-option",16),2&i){const n=p.$implicit;e.Q6J("nzValue",n.id)("nzLabel",n.name)}}const M=function(i,p){return{color:i,"background-color":p}},A=[{path:"",component:(()=>{class i{constructor(n,s,t,l){this.uuidService=n,this.sensService=s,this.cdr=t,this.modal=l,this.listOfData=[],this.selectedId="",this.selectedName="",this.selectedCost1=0,this.selectedCost2=0,this.selectedVol1=0,this.selectedVol2=0,this.Res1=0,this.Res2=0,this.idx="",this.textColor1="black",this.bgColor1="white",this.textColor2="black",this.bgColor2="white",this.Proc=0}ngOnInit(){this.setSelectedName(this.selectedId)}onKeyPress(n){if(["Backspace","ArrowLeft","ArrowRight","Delete","Tab"].includes(n.key))return;const t=n.target;/[0-9]/.test(n.key)||"."===n.key&&!/[.,]/.test(t.value)||n.preventDefault()}updateColorsByT(n){if(0==n)return this.textColor1="black",this.bgColor1="white",this.textColor2="black",void(this.bgColor2="white");n>0?(this.textColor1="green",this.bgColor1="#e6ffed",this.textColor2="red",this.bgColor2="#ffe6e6"):(this.textColor1="red",this.bgColor1="#ffe6e6",this.textColor2="green",this.bgColor2="#e6ffed")}getRes1(){this.Res1=0!==this.selectedVol1?this.selectedCost1/this.selectedVol1:0}getRes2(){this.Res2=0!==this.selectedVol2?this.selectedCost2/this.selectedVol2:0}onCalc(){this.getRes1(),this.getRes2(),this.Proc=this.selectedCost2/this.selectedVol2>this.selectedCost1/this.selectedVol1?(this.selectedCost2/this.selectedVol2-this.selectedCost1/this.selectedVol1)/(this.selectedCost1/this.selectedVol1)*100:(this.selectedCost1/this.selectedVol1-this.selectedCost2/this.selectedVol2)/(this.selectedCost2/this.selectedVol2)*100,this.updateColorsByT(this.Res2-this.Res1)}onSelectChange(n){this.setSelectedName(n)}MakeADD(){const n=this.uuidService.generateUUID();console.log(n),this.Sens={id:n,name:this.selectedName,cost1:this.selectedCost1,cost2:this.selectedCost2,vol1:this.selectedVol1,vol2:this.selectedVol2},this.sensService.addItem(this.Sens),this.listOfData=this.sensService.getItems()}MakeDel(){if(confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?")){const s=this.idx,t=this.listOfData.findIndex(l=>l.id===s);t>-1&&this.sensService.delItem(t)}}MakePUT(){const n=this.idx,s=this.listOfData.findIndex(t=>t.id===n);s>-1&&(this.Sens={id:this.idx,name:this.selectedName,cost1:this.selectedCost1,cost2:this.selectedCost2,vol1:this.selectedVol1,vol2:this.selectedVol2},confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 ?")&&this.sensService.editItem(s,this.Sens))}setSelectedName(n){const s=this.listOfData.find(t=>t.id===n);this.idx=n,this.selectedName=s?s.name:"",this.selectedCost1=s?s.cost1:0,this.selectedCost2=s?s.cost2:0,this.selectedVol1=s?s.vol1:0,this.selectedVol2=s?s.vol2:0,this.onCalc()}downloadFile(){const s=`SensList-${(new Date).toISOString().replace(/[:.]/g,"-")}.json`,t=JSON.stringify({listOfData:this.listOfData}),l=new Blob([t],{type:"application/json"}),o=window.URL.createObjectURL(l),d=document.createElement("a");d.href=o,d.download=s,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(o),document.body.removeChild(d)}onFileSelected(n){const s=n.target;if(s.files&&s.files.length){const t=s.files[0],l=new FileReader;l.onload=o=>{const d=o.target?.result;try{const c=JSON.parse(d);if(!c.listOfData||!Array.isArray(c.listOfData))throw new Error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 JSON");this.listOfData=c.listOfData.map(a=>({id:a.id,name:a.name,cost1:a.cost1,cost2:a.cost2,vol1:a.vol1,vol2:a.vol2})),this.sensService.setItems(this.listOfData),console.log(this.listOfData)}catch(c){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0435 JSON",c)}},l.readAsText(t)}}static#e=this.\u0275fac=function(s){return new(s||i)(e.Y36(T),e.Y36(Z),e.Y36(e.sBO),e.Y36(z.Sf))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["SensComponent"]],decls:50,vars:22,consts:[[1,"send-request"],["type","file",3,"change"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary","nzDanger","",3,"click"],[2,"display","flex","gap","0","flex-wrap","wrap"],[2,"display","flex","flex-direction","column","width","30%"],["nz-input","","placeholder","\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c","inputmode","numeric","pattern","[0-9]*",3,"ngModel","ngModelChange","keypress"],["nz-input","","placeholder","\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e","inputmode","numeric","pattern","[0-9]*",3,"ngModel","ngModelChange","keypress"],["nz-input","","placeholder","\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",3,"ngModel","disabled","ngStyle","ngModelChange"],[2,"display","flex","gap","0"],[2,"display","flex","flex-direction","column","width","50%"],["nz-input","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","type","text",3,"ngModel","ngModelChange"],["nz-input","","placeholder","ID",3,"ngModel","disabled","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","placeholder","\u041f\u0440\u043e\u0446\u0435\u043d\u0442","type","text",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(o){return t.onFileSelected(o)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return t.MakeADD()}),e._uU(3,"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return t.MakeDel()}),e._uU(5,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),e.qZA(),e.TgZ(6,"button",2),e.NdJ("click",function(){return t.downloadFile()}),e._uU(7,"\u0412 \u0444\u0430\u0439\u043b"),e.qZA()(),e._UZ(8,"hr")(9,"hr"),e.TgZ(10,"div",4)(11,"div",5)(12,"label"),e._uU(13,"\u0414\u0435\u043d\u044c\u0433\u0438"),e.qZA(),e.TgZ(14,"input",6),e.NdJ("ngModelChange",function(o){return t.selectedCost1=o})("ngModelChange",function(){return t.onCalc()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA()(),e.TgZ(15,"div",5)(16,"label"),e._uU(17,"\u041a\u043e\u043b-\u0432\u043e"),e.qZA(),e.TgZ(18,"input",7),e.NdJ("ngModelChange",function(o){return t.selectedVol1=o})("ngModelChange",function(){return t.onCalc()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA()(),e.TgZ(19,"div",5)(20,"label"),e._uU(21,"\u0420\u0435\u0437"),e.qZA(),e.TgZ(22,"input",8),e.NdJ("ngModelChange",function(o){return t.Res1=o}),e.qZA()()(),e._UZ(23,"hr"),e.TgZ(24,"div",4)(25,"div",5)(26,"input",6),e.NdJ("ngModelChange",function(o){return t.selectedCost2=o})("ngModelChange",function(){return t.onCalc()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA()(),e.TgZ(27,"div",5)(28,"input",7),e.NdJ("ngModelChange",function(o){return t.selectedVol2=o})("ngModelChange",function(){return t.onCalc()})("keypress",function(o){return t.onKeyPress(o)}),e.qZA()(),e.TgZ(29,"div",5)(30,"input",8),e.NdJ("ngModelChange",function(o){return t.Res2=o}),e.qZA()()(),e._UZ(31,"hr"),e.TgZ(32,"div",9)(33,"div",10)(34,"label"),e._uU(35,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(36,"input",11),e.NdJ("ngModelChange",function(o){return t.selectedName=o}),e.qZA()(),e.TgZ(37,"div",10)(38,"label"),e._uU(39,"ID"),e.qZA(),e.TgZ(40,"input",12),e.NdJ("ngModelChange",function(o){return t.idx=o}),e.qZA()()(),e.TgZ(41,"div",0)(42,"nz-select",13),e.NdJ("ngModelChange",function(o){return t.selectedId=o})("ngModelChange",function(o){return t.onSelectChange(o)}),e.YNc(43,b,1,2,"nz-option",14),e.qZA()(),e._UZ(44,"hr"),e.TgZ(45,"div",9)(46,"div",10)(47,"label"),e._uU(48,"\u041f\u0440\u043e\u0446\u0435\u043d\u0442"),e.qZA(),e.TgZ(49,"input",15),e.NdJ("ngModelChange",function(o){return t.Proc=o}),e.qZA()()()),2&s&&(e.xp6(14),e.Q6J("ngModel",t.selectedCost1),e.xp6(4),e.Q6J("ngModel",t.selectedVol1),e.xp6(4),e.Q6J("ngModel",t.Res1)("disabled",!0)("ngStyle",e.WLB(16,M,t.textColor1,t.bgColor1)),e.xp6(4),e.Q6J("ngModel",t.selectedCost2),e.xp6(2),e.Q6J("ngModel",t.selectedVol2),e.xp6(2),e.Q6J("ngModel",t.Res2)("disabled",!0)("ngStyle",e.WLB(19,M,t.textColor2,t.bgColor2)),e.xp6(6),e.Q6J("ngModel",t.selectedName),e.xp6(4),e.Q6J("ngModel",t.idx)("disabled",!0),e.xp6(2),e.Q6J("ngModel",t.selectedId),e.xp6(1),e.Q6J("ngForOf",t.listOfData),e.xp6(6),e.Q6J("ngModel",t.Proc))},dependencies:[h.sg,h.PC,g.Ip,g.Vq,f.ix,D.w,J.dQ,u.Fj,u.JJ,u.c5,u.On,m.Zp]})}return i})()}];let I=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(A),_.Bz]})}return i})(),V=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[h.ez,I,g.LV,f.sL,S.S,y.HQ,u.u5,m.o7]})}return i})()}}]);